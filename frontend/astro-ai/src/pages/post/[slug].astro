---
import PostLayout from '../../layouts/PostLayout.astro';
import { getPosts, getPostBySlug } from '../../lib/ghost';

export async function getStaticPaths() {
  const posts = await getPosts();
  return posts.map((post: any) => ({
    params: { slug: post.slug },
  }));
}

const { slug } = Astro.params;
const post = await getPostBySlug(slug as string);
---

<PostLayout
  title={post.title}
  description={post.excerpt}
  publishedAt={post.published_at}
  tags={post.tags}
  featureImage={post.feature_image}
>
  <Fragment set:html={post.html} />
</PostLayout>
